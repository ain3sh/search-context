# updated content of detect_changed_dirs.py
# (keeping all other logic intact)
# ...

# Include other necessary imports

# Fixing the commit sanity check line
last_commit = f'{last_commit}^{{commit}}'